jQuery(function(a){a(document).ready(function(){var b=a(".show_store_banner_color").data("menu-color");a(".show_store_banner_color").css({"background-color":b}),a("#campaign_search").submit(function(){return a.get(this.action,a(this).serialize(),null,"script"),!1}),a("#store_search").submit(function(){return a.get(this.action,a(this).serialize(),null,"script"),!1}),a(".create_store").on("click",function(){return a(".create_store").data("campaign-count")<=0?(confirm("Please create at least one campaign to make use of the store function "),!1):void 0})});var b,c;if(a("#campaign_store_text_color").data("text-color")||(b="#ffffff",a("#campaign_store_text_color").attr("value","rgb(255, 255, 255)")),a("#picker").data("menu-color")||(c="#ff8800",a("#picker").attr("value","#ff8800")),a("#picker").spectrum({color:c,allowEmpty:!0}),a("#campaign_store_text_color").spectrum({color:b,allowEmpty:!0}),a("#picker").on("change",function(){if(a(this).siblings().length>0){var b=a(this).siblings().find(".sp-preview-inner").attr("style").split(":")[1].split(";")[0].replace(" ","");a("#picker").val(b)}}),a(".cover_imd_details").tooltipster({theme:".tooltip_content"}),a(".cover_imd_details_style").tooltipster("update",a(".img_details_style_info").html()),a("#campaign_store_text_color").on("change",function(){if(a(this).siblings().length>0){var b=a(this).siblings().find(".sp-preview-inner").attr("style").split(":")[1].split(";")[0].replace(" ","");a("#campaign_store_text_color").val(b)}}),document.getElementById("selected_campaigns"))var d=a("#selected_campaigns").val().split(",");else var d=[];a(document).on("click",".campaign_store_campaigns",function(){a(this).is(":checked")?d.push(a(this).attr("value")):(Array.prototype.remove=function(a){return this.splice(this.indexOf(a),1)},d.remove(a(this).attr("value"))),a("#selected_campaigns").val(d);var b=a("#filter option[value='selected']").length>0;""!=a("#selected_campaigns").val()?b||a("#filter").append("<option value='selected'>Selected Campaigns</option>"):(a("#filter option[value='selected']").remove(),a("#filter").change())}),a(document).on("click",".campaignSearchBtn",function(){var b=a(".search-query").val(),c=a(".filter").data("store-path");a.ajax({url:c,method:"GET",data:{search:b},dataType:"script",success:function(){},error:function(){console.log("failure")}})}),a(document).on("change",".productFilter",function(){var b=a("#filter").val(),c=a(".filter").data("store-path");a.ajax({url:c,method:"GET",data:{filter:b,campaign_ids:a("#selected_campaigns").val()},dataType:"script",success:function(){},error:function(){console.log("failure")}})}),a("#add_logo").on("change",function(){a("#add_logo").css("visibility","visible")}),a("#campaign_list input[type=checkbox]").on("click",function(b){a(b.currentTarget).closest("li").toggleClass("selected")}),a(document).on("submit",function(){var b=!1;if(a("input:checkbox").each(function(){a(this).is(":checked")&&(b=!0)}),""==a(0==b&&"#selected_campaigns").val())return alert("Please link at least one campaign"),a(this).find("button.campaigner").prop("disabled",!1),!1;var c=[];if(document.getElementById("campaign_store_name")){var d=new LiveValidation("campaign_store_name",{onlyOnSubmit:!0});d.add(Validate.Presence,{failureMessage:"Please enter name"}),c.push(d)}if(document.getElementById("logo_file")){var e=new LiveValidation("logo_file",{onlyOnSubmit:!0});e.add(Validate.Format,{pattern:/\.(gif|jpg|jpeg|png)$/i,failureMessage:"Only jpg, jpeg, png, gif allowed."}),c.push(e)}if(document.getElementById("add_logo")){var f=new LiveValidation("add_logo",{onlyOnSubmit:!0});f.add(Validate.Format,{pattern:/\.(gif|jpg|jpeg|png)$/i,failureMessage:"Only jpg, jpeg, png, gif allowed."}),c.push(f)}var g=LiveValidation.massValidate(c);return 0==g?(a(this).find("button.campaigner").prop("disabled",!1),!1):void a(this).find("button.campaigner").prop("disabled",!0)})}),jQuery(function(a){a(document).ready(function(){var b=a(".show_store_banner_color").data("menu-color");a(".show_store_banner_color").css({"background-color":b}),a("#campaign_search").submit(function(){return a.get(this.action,a(this).serialize(),null,"script"),!1}),a("#store_search").submit(function(){return a.get(this.action,a(this).serialize(),null,"script"),!1}),a(".create_store").on("click",function(){return a(".create_store").data("campaign-count")<=0?(confirm("Please create at least one campaign to make use of the store function "),!1):void 0})});var b,c;if(a("#campaign_store_text_color").data("text-color")||(b="#ffffff",a("#campaign_store_text_color").attr("value","rgb(255, 255, 255)")),a("#picker").data("menu-color")||(c="#ff8800",a("#picker").attr("value","#ff8800")),a("#picker").spectrum({color:c,allowEmpty:!0}),a("#campaign_store_text_color").spectrum({color:b,allowEmpty:!0}),a("#picker").on("change",function(){if(a(this).siblings().length>0){var b=a(this).siblings().find(".sp-preview-inner").attr("style").split(":")[1].split(";")[0].replace(" ","");a("#picker").val(b)}}),a(".cover_imd_details").tooltipster({theme:".tooltip_content"}),a(".cover_imd_details_style").tooltipster("update",a(".img_details_style_info").html()),a("#campaign_store_text_color").on("change",function(){if(a(this).siblings().length>0){var b=a(this).siblings().find(".sp-preview-inner").attr("style").split(":")[1].split(";")[0].replace(" ","");a("#campaign_store_text_color").val(b)}}),document.getElementById("selected_campaigns"))var d=a("#selected_campaigns").val().split(",");else var d=[];a(document).on("click",".campaign_store_campaigns",function(){a(this).is(":checked")?d.push(a(this).attr("value")):(Array.prototype.remove=function(a){return this.splice(this.indexOf(a),1)},d.remove(a(this).attr("value"))),a("#selected_campaigns").val(d);var b=a("#filter option[value='selected']").length>0;""!=a("#selected_campaigns").val()?b||a("#filter").append("<option value='selected'>Selected Campaigns</option>"):(a("#filter option[value='selected']").remove(),a("#filter").change())}),a(document).on("click",".campaignSearchBtn",function(){var b=a(".search-query").val(),c=a(".filter").data("store-path");a.ajax({url:c,method:"GET",data:{search:b},dataType:"script",success:function(){},error:function(){console.log("failure")}})}),a(document).on("change",".productFilter",function(){var b=a("#filter").val(),c=a(".filter").data("store-path");a.ajax({url:c,method:"GET",data:{filter:b,campaign_ids:a("#selected_campaigns").val()},dataType:"script",success:function(){},error:function(){console.log("failure")}})}),a("#add_logo").on("change",function(){a("#add_logo").css("visibility","visible")}),a("#campaign_list input[type=checkbox]").on("click",function(b){a(b.currentTarget).closest("li").toggleClass("selected")}),a(document).on("submit",function(){var b=!1;if(a("input:checkbox").each(function(){a(this).is(":checked")&&(b=!0)}),""==a(0==b&&"#selected_campaigns").val())return alert("Please link at least one campaign"),a(this).find("button.campaigner").prop("disabled",!1),!1;var c=[];if(document.getElementById("campaign_store_name")){var d=new LiveValidation("campaign_store_name",{onlyOnSubmit:!0});d.add(Validate.Presence,{failureMessage:"Please enter name"}),c.push(d)}if(document.getElementById("logo_file")){var e=new LiveValidation("logo_file",{onlyOnSubmit:!0});e.add(Validate.Format,{pattern:/\.(gif|jpg|jpeg|png)$/i,failureMessage:"Only jpg, jpeg, png, gif allowed."}),c.push(e)}if(document.getElementById("add_logo")){var f=new LiveValidation("add_logo",{onlyOnSubmit:!0});f.add(Validate.Format,{pattern:/\.(gif|jpg|jpeg|png)$/i,failureMessage:"Only jpg, jpeg, png, gif allowed."}),c.push(f)}var g=LiveValidation.massValidate(c);return 0==g?(a(this).find("button.campaigner").prop("disabled",!1),!1):void a(this).find("button.campaigner").prop("disabled",!0)})});